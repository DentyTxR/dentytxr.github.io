@implements IDisposable

@page "/info"

<PageTitle>Site Info</PageTitle>

<MudContainer MaxWidth="MaxWidth.Large" class="mt-8">
    <MudGrid Justify="Justify.Center">
        <MudItem xs="12" sm="11" md="8" lg="7">
            <MudCard>
                <MudCardHeader>
                    <MudText Typo="Typo.h4">Website Info</MudText>
                </MudCardHeader>
                <MudCardContent>
                    <MudText Typo="Typo.body1">
                        This website started as a personal project to learn Blazor and web development. It still is, but I'm also beginning to create and host tools.
                    </MudText>
                    <MudText Typo="Typo.body1">
                        Feel free to make suggestions such as new ideas, or source code suggestions <MudLink Href="https://github.com/DentyTxR/dentytxr.github.io/issues">here</MudLink>.
                    </MudText>
                </MudCardContent>
            </MudCard>
        </MudItem>
        <MudFlexBreak />
        <MudItem xs="10" sm="8" md="6" lg="3">
            <MudCard>
                <MudCardContent>
                    <MudText Typo="Typo.body1">
                        Current App Version: @AppVersionState.AppStateData.Version<br />
                        What's New: Check <MudLink Href="/Updates#LatestUpdate">here</MudLink><br />
                        Latest Update Was: @AppVersionState.AppStateData.Date<br />
                        @timeConverted
                    </MudText>
                </MudCardContent>
            </MudCard>
        </MudItem>
    </MudGrid>
</MudContainer>

@code {
    [CascadingParameter]
    public required ghp_app.Services.AppVersionService appStateService { get; set; }

    private string timeConverted = string.Empty;
    Timer timer;

    protected override void OnInitialized()
    {
        timer = new Timer(Tick, null, 0, 1000);
    }

    private void Tick(object _)
    {
        timeConverted = DateTime.Now.ToLongTimeString();
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        timer?.Dispose();
    }
}